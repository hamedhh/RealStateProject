@model DataLayer.ViewModels.DefualtSearchViewModel
@{
    bool? IsBuy = (bool?)Session["Buy"];
}
@using (Html.BeginForm("Defualt", "Search", FormMethod.Post))
{
    <section id="aa-advance-search">
        <div class="container">
            <div class="aa-advance-search-area">
                <div class="form">
                    <div class="aa-advance-search-top">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="aa-single-advance-search">
                                    <input type="text" name="regionTitle" placeholder="@DataLayer.Resources.Resource_Main.Ph_Search">
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="aa-single-advance-search">
                                    @Html.DropDownList("propertyTypeID", null, htmlAttributes: new { @class = "form-control", @id = "drpProperty", placeholder = @DataLayer.Resources.Resource_Main.DealType })
                                    @Html.ValidationMessageFor(model => model.propertyTypeID, "", htmlAttributes: new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="aa-single-advance-search">
                                    @Html.DropDownList("usageID", null, htmlAttributes: new { @class = "form-control", @id = "drpUsage", placeholder = @DataLayer.Resources.Resource_Main.HomeType })
                                    @Html.ValidationMessageFor(model => model.propertyTypeID, "", htmlAttributes: new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="aa-single-advance-search">
                                    @Html.DropDownList("CityID", new SelectList(string.Empty), new { @class = "form-control", @id = "drpCity", placeholder = @DataLayer.Resources.Resource_Main.City })
                                    @Html.ValidationMessageFor(model => model.CityID, "", htmlAttributes: new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="aa-single-advance-search">
                                    @Html.DropDownList("CountryID", null, new { @class = "form-control", @id = "drpCountry", placeholder = @DataLayer.Resources.Resource_Main.Country })
                                    @Html.ValidationMessageFor(model => model.CountryID, "", htmlAttributes: new { @class = "text-danger" })
                                </div>
                            </div>


                            <div class="col-md-2">
                                <div class="aa-single-advance-search">
                                    <input style="margin-top: 10px !important;" class="aa-search-btn" type="submit" value="@DataLayer.Resources.Resource_Main.Search">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="aa-title">
                        @*<h4 id="headerBuy">@(IsBuy == true ? DataLayer.Resources.Resource_Main.Buy : DataLayer.Resources.Resource_Main.MortgageRent) </h4>*@
                        <h4 id="headerBuy">@DataLayer.Resources.Resource_Main.Buy</h4>
                        <h4 id="headerRent">@DataLayer.Resources.Resource_Main.MortgageRent </h4>
                        <span></span>
                    </div>
                    <div class="aa-advance-search-bottom">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="aa-single-filter-search">
                                    <span>@DataLayer.Resources.Resource_Main.Area</span>
                                    <span>@DataLayer.Resources.Resource_Main.From</span>
                                    <span id="skip-value-lower" class="example-val">30.00</span>
                                    <span>@DataLayer.Resources.Resource_Main.To</span>
                                    <span id="skip-value-upper" class="example-val">100.00</span>
                                    <div id="aa-sqrfeet-range" class="noUi-target noUi-ltr noUi-horizontal noUi-background">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="aa-single-filter-search">
                                    <span id="lblRent">:  رهن</span>
                                    <span>@DataLayer.Resources.Resource_Main.Price</span>
                                    <span>@DataLayer.Resources.Resource_Main.From</span>
                                    <span id="skip-value-lower2" class="example-val">30.00</span>
                                    <span>@DataLayer.Resources.Resource_Main.To</span>
                                    <span id="skip-value-upper2" class="example-val">100.00</span>
                                    <div id="aa-price-range1" class="noUi-target noUi-ltr noUi-horizontal noUi-background">
                                    </div>
                                </div>
                                <div class="aa-single-filter-search" id="valRent" style="margin-top: 50px !important;">
                                    <span>:  اجاره</span>
                                    <span>@DataLayer.Resources.Resource_Main.Price</span>
                                    <span>@DataLayer.Resources.Resource_Main.From</span>
                                    <span id="skip-value-lower3" class="example-val">30.00</span>
                                    <span>@DataLayer.Resources.Resource_Main.To</span>
                                    <span id="skip-value-upper3" class="example-val">100.00</span>
                                    <div id="aa-price-range2" class="noUi-target noUi-ltr noUi-horizontal noUi-background">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
}
<script src="~/Scripts/jquery.js"></script>
<script>

    $(document).ready(function () {
        $('#drpProperty').change(function () {

            if ($('#drpProperty').val() == 3) {
                $('#headerBuy').show();
                $('#headerRent').fadeOut('slow');
                $('#valRent').fadeOut('slow'); 
                $('#lblRent').fadeOut('slow'); 
            }
            if ($('#drpProperty').val()  == 2) {
                $('#headerBuy').fadeOut('slow');
                $('#headerRent').show();
                $('#valRent').show();
                $('#lblRent').show(); 
            }
        });
    });

    $(document).ready(function () {
        property = $('#drpProperty').val();
        if ($('#drpProperty').val() == 3) {
            $('#headerBuy').show();
            $('#headerRent').fadeOut('slow');
            $('#valRent').fadeOut('slow');
            $('#lblRent').fadeOut('slow'); 
        }
        if ($('#drpProperty').val() == 2) {
            $('#headerBuy').fadeOut('slow');
            $('#headerRent').show();
            $('#valRent').show();
            $('#lblRent').show(); 
        }
    });

</script>
<script>
    $(document).ready(function () {
        $('#drpCity option').remove();
        $.ajax({
            url: '/Search/findCity/',
            dataType: "json",
            type: "POST",
            data: { "id": $('#drpCountry').val() },

            success: function (data) {
                $.each(data, function () {
                    $('#drpCity').append('<option value=' + this.ID + '>' + this.Name + '</option>')
                });
            },
            error: function (jqXhr, textStatus, errorThrown) {
                alert('Error getting city!');
            }
        });


    });


    $(document).ready(function () {
        $('#drpCountry').change(function () {
            $('#drpCity option').remove();
            $.ajax({
                url: '/Search/findCity/',
                dataType: "json",
                type: "POST",
                data: { "id": $('#drpCountry').val() },

                success: function (data) {
                    $.each(data, function () {
                        $('#drpCity').append('<option value=' + this.ID + '>' + this.Name + '</option>')
                    });
                },
                error: function (jqXhr, textStatus, errorThrown) {
                    alert('Error getting city!');
                }
            });
        });
    });
</script>
